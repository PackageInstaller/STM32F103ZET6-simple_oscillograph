# 基于野火指南者开发板的简易示波器，使用emwin544+freertos，用片上adc采样，最高1MHz采样

***

> 使用野火的指南者开发板，自带屏幕。用PC5测量，按键K1可以调整采样率。另外PA4和PA5上发出相同的正弦波信号，正弦波频率可以按K2调节。暂时只有自动触发

~~按stm32手册上最快采样时间1.5周期的话最快是1us的转换时间，测试下来好像是能稍微更快一些，我也不确定。就算1.2MHz的话分辨率也不是很高，测个几十kHz的信号还是很准的，更高的就不太行了~~

~~ADC连续转换每次需要的时间完全由ADC时钟来确定，根据手册1.5+12.5的转换周期，18MHz对应1,285,714点每秒，36MHz对应2,571,428点每秒，经过测试完全正确。最后使用18MHzADC时钟，并由1.2MHz的定时器来触发转换，也就是1,200,000点每秒。~~

~~屏幕右边写了两个按钮，暂时只有测试作用，以后可以加个FFT和多通道进去。~~

***

# 以上全部作废，花了几天时间重新写了一个新的出来。

## 运行图片

测得另一个单片产生的PWM波

<img src="C:\Users\godcreator\Desktop\无标题.jpg" alt="无标题" style="zoom: 25%;" />

## 功能总览
> 1. 界面完全更新
> 2. 可以显示波形或者FFT
> 3. 最高采样率1M，最低500
> 4. 使用FFT测量波形频率（在采样率很高时由于FFT点数依旧为1024会不准），显示峰峰值和最小值
> 5. 按键调整触发电平大小、采样率、电压倍率、水平位移、垂直位移、DAC频率、N个显示点代表1个采样点
> 6. 按键操作为：单击Key1为增大、上移、左移，Key2相反；双击Key1选择下一个参数，双击Key2选择上一个参数；三击调节DAC正弦波频率
> 7. 屏幕右上角的按钮可以调整显示FFT或者波形，左上角的按钮可以暂停波形
> 8. 只有自动触发
## 没有的功能（以后可能添加）
> 1. 正常触发
> 2. 波形保存
> 3. 自动设置
> 4. 多通道，目前只有一个通道
>

## 引脚说明

PA4和PA5输出DAC正弦波，PC5作为ADC的输入，两个按键分别为PA0和PC13，串口用USART1，PA9、PA10收发。